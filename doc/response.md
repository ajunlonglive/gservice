# 为什么要用JSON
为提升服务端和客户端程序性能,节约网络流量,应答数据使用压缩的json格式输出,而不是xml格式输出.应答数据分为四种格式,其中状态码(status)和执行时长(elapsed)每种应答格式都包含.

**status**<br />
- 200 表示服务器执行请求成功<br />
- 301 表示服务器要求客户端重定向到指定的url<br />
- 500 表示服务器执行请求发生异常,此时应该打印异常消息结构"error"<br />

**elapsed**
- 表示服务器处理这个请求一共花了多少毫秒,单位为毫秒<br />

## 1 消息结构体
```json
{
  "status":200,
  "msg":"服务器发送的消息内容",
  "elapsed":0.001
}
```

## 2 异常结构体
```json
{
  "status":500,
  "error":"服务器异常信息",
  "elapsed":0.001
}
```

## 3 重定向结构体
```json
{
  "status":301,
  "msg":"服务器发送的消息内容",
  "url":"服务器要求客户端重定向到的url",
  "elapsed":0.001
}
```
## 4 记录集结构体
```json
{
  "status":200,
  "recordset":[[[]]],
  "token":"",
  "elapsed":0.001
}
```
**recordset**
- recordset[0]                      表示获取第一个查询结果<br />
- recordset[0][0]                   表示获取第一个查询结果中的第一行<br />
- recordset[0][0][0]                表示获取第一个查询结果中的第一行中的第一列<br />
- recordset[[],[[f1,f2,f3]]]        表示获取第一个查询没有返回的数据<br />
- recordset[[[null,f2,f3]]]         表示获取第一个查询结果中的第一行第一列的值为null<br />
- recordset[[[null,[f1,null],f3]]]    表示获取第一个查询结果中的第一行第二列为数组类型,数组的第二个值为null<br />

在实际使用中,应先获取某一个查询结果,然后检查是否为null,然后再使用下一级,获取行和列同理.<br />
程序员在开发程序时列数、列名称、类型、是否允许为null是明确的,因此为提升性能,节约网络流量只输出列的值.<br />

**token**<br/>
需要验证用户的方法才会输出<br/>
## 5 PostgreSQL字段类型输入和输出
**基本类型**<br />
　　目前支持的输入和输出基本类型为:<br />
　　　　BOOL/BYTEA/INT2/INT4/INT8/MONEY<br />
　　　　FLOAT4/FLOAT8/NUMERI//DECIMAL<br />
　　　　CHAR/VARCHAR/TEXT<br />
　　　　UUID<br />
　　　　TIMESTAMP/TIMESTAMPTZ/DATE/TIME/TIMETZ/INTERVAL<br />
　　　　JSON/JSONB<br />
**数组类型**<br />
　　支持的输入和输出的一维数组基本类型为:<br />
　　　　INT2/INT4/INT8<br />
　　　　FLOAT4/FLOAT8<br />
　　　　CHAR/VARCHAR/TEXT<br />
　　　　UUID<br />
　　其它基本类型和多维数组将来支持.<br />
### 5.1 特殊类型输入输出格式
**MONEY:**<br />
　　MONEY类型在PostgreSQL内部是int64存储的,为避免转换时丢失精度,输入输出MONEY类型都是int64类型,也就是精确至分.<br />

**NUMERIC/DECIMAL**<br />
　　由于数据精度问题,输入输出都是字符串.<br />

**BYTEA**<br />
　　输入输出都是base64字符串.<br />

**TIMESTAMP/TIMESTAMPTZ/DATE/TIME/TIMETZ/INTERVAL**<br />
　　输入输出都是ISO 8601日期和时间格式的字符串.<br />



## 6 示例
输出只包含一个查询结果的json,共x行,每行5列.
```json
{"status":200,"recordset":[[[2571,2570,"昆明市",530100,true],[2572,2571,"五华区",530102,false],[2573,2571,"盘龙区",530103,false],[2574,2571,"官渡区",530111,false],[2575,2571,"西山区",530112,false],[2576,2571,"东川区",530113,false],[2577,2571,"呈贡区",530114,false],[2578,2571,"晋宁区",530115,false],[2579,2571,"富民县",530124,false],[2580,2571,"宜良县",530125,false],[2581,2571,"石林彝族自治县",530126,false],[2582,2571,"嵩明县",530127,false],[2583,2571,"禄劝彝族苗族自治县",530128,false],[2584,2571,"寻甸回族彝族自治县",530129,false],[2585,2571,"安宁市",530181,false],[2586,2570,"曲靖市",530300,true],[2587,2586,"麒麟区",530302,false],[2588,2586,"沾益区",530303,false],[2589,2586,"马龙县",530321,false],[2590,2586,"陆良县",530322,false],[2591,2586,"师宗县",530323,false],[2592,2586,"罗平县",530324,false],[2593,2586,"富源县",530325,false],[2594,2586,"会泽县",530326,false],[2595,2586,"宣威市",530381,false],[2596,2570,"玉溪市",530400,true],[2597,2596,"红塔区",530402,false],[2598,2596,"江川区",530403,false],[2599,2596,"澄江县",530422,false],[2600,2596,"通海县",530423,false],[2601,2596,"华宁县",530424,false],[2602,2596,"易门县",530425,false],[2603,2596,"峨山彝族自治县",530426,false],[2604,2596," 新平彝族傣族自治县",530427,false],[2605,2596,"元江哈尼族彝族傣族自治县",530428,false],[2606,2570,"保山市",530500,true],[2607,2606,"隆阳区",530502,false],[2608,2606,"施甸县",530521,false],[2609,2606,"龙陵县",530523,false],[2610,2606,"昌宁县",530524,false],[2611,2606,"腾冲市",530581,false],[2612,2570,"昭通市",530600,true],[2613,2612,"昭阳区",530602,false],[2614,2612,"鲁甸县",530621,false],[2615,2612,"巧家县",530622,false],[2616,2612,"盐津县",530623,false],[2617,2612,"大关县",530624,false],[2618,2612,"永善县",530625,false],[2619,2612,"绥江县",530626,false],[2620,2612,"镇雄县",530627,false],[2621,2612,"彝良县",530628,false],[2622,2612,"威信县",530629,false],[2623,2612,"水富县",530630,false],[2624,2570,"丽江市",530700,true],[2625,2624,"古城区",530702,false],[2626,2624,"玉龙纳西族自治县",530721,false],[2627,2624,"永胜县",530722,false],[2628,2624,"华坪县",530723,false],[2629,2624,"宁蒗彝族自治县",530724,false],[2630,2570,"普洱市",530800,true],[2631,2630,"思茅区",530802,false],[2632,2630,"宁洱哈尼族彝族自治县",530821,false],[2633,2630,"墨江哈尼族自治县",530822,false],[2634,2630,"景东彝族自治县",530823,false],[2635,2630,"景谷傣族彝族自治县",530824,false],[2636,2630,"镇沅彝族哈尼族拉祜族自治县",530825,false],[2637,2630,"江城哈尼族彝族自治县",530826,false],[2638,2630,"孟连傣族拉祜族佤族自治县",530827,false],[2639,2630,"澜沧拉祜族自治县",530828,false],[2640,2630,"西盟佤族自治县",530829,false],[2641,2570,"临沧市",530900,true],[2642,2641,"临翔区",530902,false],[2643,2641,"凤庆县",530921,false],[2644,2641,"云县",530922,false],[2645,2641,"永德县",530923,false],[2646,2641,"镇康县",530924,false],[2647,2641,"双江拉祜族佤族布朗族傣族自治县",530925,false],[2648,2641,"耿马 傣族佤族自治县",530926,false],[2649,2641,"沧源佤族自治县",530927,false],[2650,2570,"楚雄彝族自治州",532300,true],[2651,2650,"楚雄市",532301,false],[2652,2650,"双柏县",532322,false],[2653,2650,"牟定县",532323,false],[2654,2650,"南华县",532324,false],[2655,2650,"姚安县",532325,false],[2656,2650,"大姚县",532326,false],[2657,2650,"永仁县",532327,false],[2658,2650,"元谋县",532328,false],[2659,2650,"武定县",532329,false],[2660,2650,"禄丰县",532331,false],[2661,2570,"红河哈尼族彝族 自治州",532500,true],[2662,2661,"个旧市",532501,false],[2663,2661,"开远市",532502,false],[2664,2661,"蒙自市",532503,false],[2665,2661,"弥勒市",532504,false],[2666,2661,"屏边苗族自治县",532523,false],[2667,2661,"建水县",532524,false],[2668,2661,"石屏县",532525,false],[2669,2661,"泸西县",532527,false],[2670,2661,"元阳县",532528,false],[2671,2661,"红河县",532529,false],[2672,2661,"金平苗族瑶族傣族自治县",532530,false],[2673,2661,"绿春县",532531,false],[2674,2661,"河口瑶族自治县",532532,false],[2675,2570,"文山壮族苗族自治州",532600,true],[2676,2675,"文山市",532601,false],[2677,2675,"砚山县",532622,false],[2678,2675,"西畴县",532623,false],[2679,2675,"麻栗坡县",532624,false],[2680,2675,"马关县",532625,false],[2681,2675,"丘北县",532626,false],[2682,2675,"广南县",532627,false],[2683,2675,"富宁县",532628,false],[2684,2570,"西双版纳傣族自治州",532800,true],[2685,2684,"景洪市",532801,false],[2686,2684,"勐海县",532822,false],[2687,2684,"勐腊县",532823,false],[2688,2570,"大理白族自治州",532900,true],[2689,2688,"大理市",532901,false],[2690,2688,"漾濞彝族自治县",532922,false],[2691,2688,"祥云县",532923,false],[2692,2688,"宾川县",532924,false],[2693,2688,"弥渡县",532925,false],[2694,2688,"南涧彝族自治县",532926,false],[2695,2688,"巍山彝族回族自治县",532927,false],[2696,2688,"永平县",532928,false],[2697,2688,"云龙县",532929,false],[2698,2688,"洱源县",532930,false],[2699,2688,"剑川县",532931,false],[2700,2688,"鹤庆县",532932,false],[2701,2570,"德宏傣族景颇族自治州",533100,true],[2702,2701,"瑞丽市",533102,false],[2703,2701,"芒市",533103,false],[2704,2701,"梁河县",533122,false],[2705,2701,"盈江县",533123,false],[2706,2701,"陇川县",533124,false],[2707,2570,"怒江傈僳族自治 州",533300,true],[2708,2707,"泸水市",533301,false],[2709,2707,"福贡县",533323,false],[2710,2707,"贡山独龙族怒族自治县",533324,false],[2711,2707,"兰坪白族普米族自治县",533325,false],[2712,2570,"迪庆藏族自治州",533400,true],[2713,2712,"香格里拉市",533401,false],[2714,2712,"德钦县",533422,false],[2715,2712,"维西傈僳族自治县",533423,false]],[[2571,2570,"昆明市",530100,true],[2572,2571,"五华区",530102,false],[2573,2571,"盘龙区",530103,false],[2574,2571,"官渡区",530111,false],[2575,2571,"西山区",530112,false],[2576,2571,"东川区",530113,false],[2577,2571,"呈贡区",530114,false],[2578,2571,"晋宁区",530115,false],[2579,2571,"富民县",530124,false],[2580,2571,"宜良县",530125,false],[2581,2571,"石林彝族自治县",530126,false],[2582,2571,"嵩明县",530127,false],[2583,2571,"禄劝彝族苗族自治县",530128,false],[2584,2571,"寻甸回族彝族自治县",530129,false],[2585,2571,"安宁市",530181,false],[2586,2570,"曲靖市",530300,true],[2587,2586,"麒麟区",530302,false],[2588,2586,"沾益区",530303,false],[2589,2586,"马龙县",530321,false],[2590,2586,"陆良县",530322,false],[2591,2586,"师宗县",530323,false],[2592,2586,"罗平县",530324,false],[2593,2586,"富源县",530325,false],[2594,2586,"会泽县",530326,false],[2595,2586,"宣威市",530381,false],[2596,2570,"玉溪市",530400,true],[2597,2596,"红塔区",530402,false],[2598,2596,"江川区",530403,false],[2599,2596,"澄江县",530422,false],[2600,2596,"通海县",530423,false],[2601,2596,"华宁县",530424,false],[2602,2596,"易门 县",530425,false],[2603,2596,"峨山彝族自治县",530426,false],[2604,2596,"新平彝族傣族自治县",530427,false],[2605,2596,"元江哈尼族彝族傣族自治县",530428,false],[2606,2570,"保山市",530500,true],[2607,2606,"隆阳区",530502,false],[2608,2606,"施 甸县",530521,false],[2609,2606,"龙陵县",530523,false],[2610,2606,"昌宁县",530524,false],[2611,2606,"腾冲市",530581,false],[2612,2570,"昭通市",530600,true],[2613,2612,"昭阳区",530602,false],[2614,2612,"鲁甸县",530621,false],[2615,2612,"巧家 县",530622,false],[2616,2612,"盐津县",530623,false],[2617,2612,"大关县",530624,false],[2618,2612,"永善县",530625,false],[2619,2612,"绥江县",530626,false],[2620,2612,"镇雄县",530627,false],[2621,2612,"彝良县",530628,false],[2622,2612,"威信县",530629,false],[2623,2612,"水富县",530630,false],[2624,2570,"丽江市",530700,true],[2625,2624,"古城区",530702,false],[2626,2624,"玉龙纳西族自治县",530721,false],[2627,2624,"永胜县",530722,false],[2628,2624,"华坪县",530723,false],[2629,2624,"宁蒗彝族自治县",530724,false],[2630,2570,"普洱市",530800,true],[2631,2630,"思茅区",530802,false],[2632,2630,"宁洱哈尼族彝族自治县",530821,false],[2633,2630,"墨江哈尼族自治县",530822,false],[2634,2630,"景东彝族自治县",530823,false],[2635,2630,"景谷傣族彝族自治县",530824,false],[2636,2630,"镇沅彝族哈尼族拉祜族自治县",530825,false],[2637,2630,"江城哈尼族彝族自治县",530826,false],[2638,2630,"孟连傣族拉祜族佤族自治县",530827,false],[2639,2630,"澜沧拉祜族自治县",530828,false],[2640,2630,"西盟佤族自治县",530829,false],[2641,2570,"临沧市",530900,true],[2642,2641,"临翔区",530902,false],[2643,2641,"凤 庆县",530921,false],[2644,2641,"云县",530922,false],[2645,2641,"永德县",530923,false],[2646,2641,"镇康县",530924,false],[2647,2641,"双江拉祜族佤族布朗族傣族自治县",530925,false],[2648,2641,"耿马傣族佤族自治县",530926,false],[2649,2641,"沧源佤族自治县",530927,false],[2650,2570,"楚雄彝族自治州",532300,true],[2651,2650,"楚雄市",532301,false],[2652,2650,"双柏县",532322,false],[2653,2650,"牟定县",532323,false],[2654,2650,"南华县",532324,false],[2655,2650,"姚安县",532325,false],[2656,2650,"大姚县",532326,false],[2657,2650,"永仁县",532327,false],[2658,2650,"元谋县",532328,false],[2659,2650,"武定县",532329,false],[2660,2650,"禄丰县",532331,false],[2661,2570,"红河哈尼族彝族自治州",532500,true],[2662,2661,"个旧市",532501,false],[2663,2661,"开远市",532502,false],[2664,2661,"蒙自市",532503,false],[2665,2661,"弥勒市",532504,false],[2666,2661,"屏边苗族自治县",532523,false],[2667,2661,"建水县",532524,false],[2668,2661,"石屏县",532525,false],[2669,2661,"泸西县",532527,false],[2670,2661,"元阳县",532528,false],[2671,2661,"红河县",532529,false],[2672,2661,"金平苗族瑶族傣族自治县",532530,false],[2673,2661,"绿春县",532531,false],[2674,2661,"河口瑶族自治县",532532,false],[2675,2570,"文山壮族苗族自治州",532600,true],[2676,2675,"文山市",532601,false],[2677,2675,"砚山县",532622,false],[2678,2675,"西畴县",532623,false],[2679,2675,"麻栗坡县",532624,false],[2680,2675,"马关县",532625,false],[2681,2675,"丘北县",532626,false],[2682,2675,"广南县",532627,false],[2683,2675,"富宁县",532628,false],[2684,2570,"西双版纳傣族自治州",532800,true],[2685,2684,"景洪市",532801,false],[2686,2684,"勐海县",532822,false],[2687,2684,"勐腊县",532823,false],[2688,2570,"大理白族自治州",532900,true],[2689,2688,"大理市",532901,false],[2690,2688,"漾濞彝族自治县",532922,false],[2691,2688,"祥云县",532923,false],[2692,2688,"宾 川县",532924,false],[2693,2688,"弥渡县",532925,false],[2694,2688,"南涧彝族自治县",532926,false],[2695,2688,"巍山彝族回族自治县",532927,false],[2696,2688,"永平县",532928,false],[2697,2688,"云龙县",532929,false],[2698,2688,"洱源县",532930,false],[2699,2688,"剑川县",532931,false],[2700,2688,"鹤庆县",532932,false],[2701,2570,"德宏傣族景颇族自治州",533100,true],[2702,2701,"瑞丽市",533102,false],[2703,2701,"芒市",533103,false],[2704,2701,"梁河县",533122,false],[2705,2701,"盈江县",533123,false],[2706,2701,"陇川县",533124,false],[2707,2570,"怒江傈僳族自治州",533300,true],[2708,2707,"泸水市",533301,false],[2709,2707,"福贡县",533323,false],[2710,2707,"贡山独龙族怒族自治县",533324,false],[2711,2707,"兰坪白族普米族自治县",533325,false],[2712,2570,"迪庆藏族自治州",533400,true],[2713,2712,"香格里拉市",533401,false],[2714,2712,"德钦县",533422,false],[2715,2712,"维西傈僳族自治县",533423,false]]],"elapsed":16.914000000000001}
```
